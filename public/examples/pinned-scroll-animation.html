<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pinned Scroll Animation - GSAP ScrollTrigger</title>
    <style>
        /* ===========================
           RESET & BASE STYLES
           =========================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            overflow-x: hidden;
        }

        /* ===========================
           SECTION STYLES
           =========================== */
        .intro-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            padding: 2rem;
        }

        .intro-content {
            max-width: 800px;
            text-align: center;
        }

        .intro-content h1 {
            font-size: clamp(2rem, 5vw, 4rem);
            font-weight: 900;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .intro-content p {
            font-size: clamp(1rem, 2vw, 1.25rem);
            color: #666;
            line-height: 1.6;
        }

        /* ===========================
           PINNED SCROLL SECTION
           =========================== */
        .pinned-scroll-section {
            position: relative;
            /* Height determines how long the pin lasts (300vh = 3x viewport) */
            min-height: 300vh;
            background: linear-gradient(180deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .pinned-element {
            /* This element will be pinned during scroll */
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            /* Performance optimization */
            will-change: transform, opacity;
        }

        .pinned-content {
            max-width: 600px;
            padding: 3rem;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            text-align: center;
            /* Performance optimization */
            will-change: transform;
        }

        .pinned-content h2 {
            font-size: clamp(1.5rem, 4vw, 3rem);
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .pinned-content p {
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            color: #666;
            line-height: 1.8;
            margin-bottom: 1.5rem;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .feature-item {
            padding: 1rem;
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            border-radius: 12px;
            font-size: 0.9rem;
            font-weight: 600;
            color: #667eea;
        }

        /* ===========================
           OUTRO SECTION
           =========================== */
        .outro-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            padding: 2rem;
        }

        .outro-content {
            max-width: 600px;
            text-align: center;
        }

        .outro-content h2 {
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            font-weight: 800;
            margin-bottom: 1rem;
            color: #333;
        }

        /* ===========================
           RESPONSIVE DESIGN
           =========================== */
        @media (max-width: 768px) {
            .pinned-content {
                padding: 2rem;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <!-- ===========================
         INTRO SECTION
         =========================== -->
    <section class="intro-section">
        <div class="intro-content">
            <h1>Pinned Scroll Animation</h1>
            <p>
                Scroll down to see the element pin in place and animate smoothly
                based on your scroll progress. Built with GSAP ScrollTrigger for
                buttery-smooth 60fps performance.
            </p>
        </div>
    </section>

    <!-- ===========================
         PINNED SCROLL SECTION
         This section pins the element during scroll
         =========================== -->
    <section class="pinned-scroll-section" id="pinned-section">
        <div class="pinned-element" id="pinned-element">
            <div class="pinned-content">
                <h2>Watch Me Transform</h2>
                <p>
                    As you scroll, I scale, rotate, fade, and translate.
                    All animations are synchronized to your scroll progress
                    for a smooth, interactive experience.
                </p>

                <div class="feature-grid">
                    <div class="feature-item">üìç Pinned</div>
                    <div class="feature-item">üìè Scale</div>
                    <div class="feature-item">üîÑ Rotate</div>
                    <div class="feature-item">‚ú® Fade</div>
                    <div class="feature-item">‚ÜïÔ∏è Translate</div>
                    <div class="feature-item">‚ö° 60fps</div>
                </div>
            </div>
        </div>
    </section>

    <!-- ===========================
         OUTRO SECTION
         =========================== -->
    <section class="outro-section">
        <div class="outro-content">
            <h2>That's It!</h2>
            <p>
                You've experienced a pinned scroll animation. This technique
                is perfect for storytelling, product showcases, and creating
                engaging web experiences.
            </p>
        </div>
    </section>

    <!-- ===========================
         GSAP & ScrollTrigger
         =========================== -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <script>
        // ===========================
        // REGISTER GSAP PLUGIN
        // ===========================
        gsap.registerPlugin(ScrollTrigger);

        // ===========================
        // PINNED SCROLL ANIMATION
        // ===========================

        // Get references to elements
        const section = document.getElementById('pinned-section');
        const pinnedElement = document.getElementById('pinned-element');

        // Create GSAP timeline with ScrollTrigger
        const tl = gsap.timeline({
            scrollTrigger: {
                trigger: section,           // Element that triggers the animation
                start: 'top top',           // Start when section top hits viewport top
                end: '+=200%',              // End after scrolling 200% of viewport height
                pin: pinnedElement,         // Pin this element in place
                scrub: 1,                   // Smooth scrubbing (1 = 1 second delay)
                anticipatePin: 1,           // Prevent jump when pinning starts
                markers: false,             // Set to true to see start/end markers (debugging)
                invalidateOnRefresh: true,  // Recalculate on window resize
            }
        });

        // ===========================
        // ANIMATION SEQUENCE
        // Each animation phase is 25% of total scroll
        // ===========================

        tl
            // PHASE 1: Fade in and scale up (0% - 25% scroll)
            .fromTo(
                pinnedElement,
                {
                    opacity: 0.3,      // Start faded
                    scale: 0.8,        // Start small
                    y: 100,            // Start below
                    rotation: -5,      // Start rotated left
                },
                {
                    opacity: 1,        // Fade to full opacity
                    scale: 1,          // Scale to normal size
                    y: 0,              // Move to center
                    rotation: 0,       // Straighten
                    duration: 0.25,    // 25% of scroll
                    ease: 'power2.out',
                }
            )

            // PHASE 2: Hold at full size (25% - 50% scroll)
            .to(pinnedElement, {
                scale: 1,
                rotation: 0,
                duration: 0.25,
                ease: 'none',          // No easing for steady hold
            })

            // PHASE 3: Scale up and rotate (50% - 75% scroll)
            .to(pinnedElement, {
                scale: 1.2,            // Scale up larger
                rotation: 5,           // Rotate right
                y: -50,                // Move up
                duration: 0.25,
                ease: 'power1.inOut',
            })

            // PHASE 4: Fade out and scale down (75% - 100% scroll)
            .to(pinnedElement, {
                opacity: 0.3,          // Fade out
                scale: 0.9,            // Scale down
                y: -100,               // Move further up
                rotation: 10,          // Rotate more
                duration: 0.25,
                ease: 'power2.in',
            });

        // ===========================
        // RESPONSIVE BEHAVIOR
        // Refresh ScrollTrigger on window resize
        // ===========================
        window.addEventListener('resize', () => {
            ScrollTrigger.refresh();
        });

        // ===========================
        // PERFORMANCE OPTIMIZATION
        // Use will-change CSS property (already in CSS)
        // GSAP automatically optimizes for GPU acceleration
        // ===========================
    </script>
</body>

</html>