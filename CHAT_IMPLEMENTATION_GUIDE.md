# ๐ฏ ุฏููู ุชุทุจูู ุงูุดุงุช ุงููุญุณูู ูู ููุญุงุช ุงูุชุญูู

## ๐ ููุฏูุฉ
ุชู ุชุทููุฑ ูููู **ChatDashboardWidget** ูุญุณูู ูุนูู ูุจุงุดุฑุฉ ุฏุงุฎู ููุญุงุช ุงูุชุญูู ุจุฏูู ุงูุญุงุฌุฉ ูู iframeุ ููุง ูููุฑ ุชุฌุฑุจุฉ ุฃูุถู ูุฃุณุฑุน.

---

## โจ ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. **ุชุฌุฑุจุฉ ูุญุณููุฉ**
โ ุนุฑุถ ููุฑู ุจุฏูู ุชุฃุฎูุฑ (ุจุฏูู iframe)  
โ ุชุตููู ุญุฏูุซ ููุงุถุญ  
โ ุฏุนู ูุงูู ููู RTL/LTR  
โ ูุถุน ูุธูู (Dark Mode)  

### 2. **ูุธุงุฆู ูุชูุฏูุฉ**
โ ูุญุงุฏุซุงุช ูุจุงุดุฑุฉ (Direct Messages)  
โ ุฑุณุงุฆู ุงูุฏุนู ุงูุฅุฏุงุฑู (Admin Support)  
โ ุงูุฑุฏ ุนูู ุงูุฑุณุงุฆู (Reply)  
โ ุญุฐู ุงูุฑุณุงุฆู  
โ ุฏุนู ุงูุฅูููุฌู  
โ ุญุงูุฉ ุงูุชุตูู (Online/Offline)  
โ ุนุฑุถ ุงูุฑุณุงุฆู ุงูููุฑูุกุฉ  

### 3. **ุณูููุฉ ุงูุงุณุชุฎุฏุงู**
โ ุจุญุซ ุณุฑูุน ุนู ุงููุณุชุฎุฏููู  
โ ุฅูุดุงุก ูุญุงุฏุซุงุช ุฌุฏูุฏุฉ ุจุณูููุฉ  
โ ุนุฑุถ ุญุงูุฉ ุงูุฑุณุงุฆู (ูุฑุณู/ููุฑูุก)  
โ ูุงุฌูุฉ ูุธููุฉ ูุจุฏูููุฉ  

---

## ๐ง ุงูุชูุงูู ูุน ููุญุงุช ุงูุชุญูู

### โ ุชู ุชุทุจูู ุงูุชุบููุฑุงุช ูู:

#### 1. **ููุญุฉ ุชุญูู ุงูุทุงูุจ** (`UserDashboard.tsx`)
```tsx
{activeTab === "chat" && (
  <div className="h-[calc(100vh-280px)] bg-white/40 backdrop-blur-md rounded-[32px] overflow-hidden border border-white/50 shadow-xl">
    <ChatDashboardWidget variant="full" />
  </div>
)}
```

#### 2. **ููุญุฉ ุชุญูู ุงููุฏุฑุจ** (`mangerDashboard.tsx`)
```tsx
{activeTab === "chat" && (
  <div className="h-[calc(100vh-280px)] bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-200">
    <ChatDashboardWidget variant="full" />
  </div>
)}
```

#### 3. **ููุญุฉ ุชุญูู ุงูุฃุฏูู** (`AdminDashboard.tsx`)
```tsx
{activeTab === "chat" && (
  <div className="h-[calc(100vh-280px)] bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-200">
    <ChatDashboardWidget variant="full" />
  </div>
)}
```

---

## ๐ฑ ุชุฎุทูุท ุงููุงุฌูุฉ

### ุงูุดูู ุงูุนุงู:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ                 โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                      โ                          โ
โ   ูุงุฆูุฉ ุงููุญุงุฏุซุงุช    โ      ูุงูุฐุฉ ุงูุดุงุช        โ
โ                      โ                          โ
โ  โข ุงููุญุงุฏุซุงุช         โ  โข ุฑุณุงุฆู ุงููุญุงุฏุซุฉ       โ
โ  โข ุงูุจุญุซ             โ  โข ุญูู ุงูุฅุฏุฎุงู          โ
โ  โข ูุญุงุฏุซุฉ ุฌุฏูุฏุฉ      โ  โข ุฃุฒุฑุงุฑ ุงูุชุญูู         โ
โ                      โ  โข ุญุงูุฉ ุงูุงุชุตุงู         โ
โโโโโโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐จ ุงูุชุตููู ูุงูุฃููุงู

### ุงูุฃููุงู ุงููุณุชุฎุฏูุฉ:
```
ุงูุฃุฒุฑู (ุงูุฃุณุงุณู):    #3B82F6
ุงูุฃุฎุถุฑ (ุฃูููุงูู):    #10B981
ุงูุฃุญูุฑ (ุบูุฑ ููุฑูุก):  #EF4444
ุงูุฑูุงุฏู (ุฎูููุฉ):     #F3F4F6
```

### ุงูุญุงูุงุช:
- **ุฑุณุงุฆู ุงููุฑุณู**: ุฃุฒุฑู ุจุชุฏุฑุฌ ูุงุชุญ
- **ุฑุณุงุฆู ุงููุณุชูุจู**: ุฑูุงุฏู ูุงุชุญ
- **ุญุงูุฉ ุฃูููุงูู**: ููุทุฉ ุฎุถุฑุงุก
- **ุญุงูุฉ ุฃูููุงูู**: ูุง ุชูุฌุฏ ุนูุงูุฉ

---

## ๐ API Endpoints ุงููุณุชุฎุฏูุฉ

### ุงูุญุตูู ุนูู ุงููุญุงุฏุซุงุช:
```
GET /api/v1/chat/conversations
Headers: { Authorization: `Bearer ${token}` }
```

**ุงูุฑุฏ:**
```json
{
  "status": "success",
  "data": [
    {
      "_id": "conversation_id",
      "participants": [...],
      "type": "direct",
      "lastMessage": {...},
      "myUnreadCount": 0
    }
  ]
}
```

### ุงูุญุตูู ุนูู ุงูุฑุณุงุฆู:
```
GET /api/v1/chat/conversations/{conversationId}/messages
Query: { page: 1, limit: 50 }
```

### ุฅุฑุณุงู ุฑุณุงูุฉ:
```
POST /api/v1/chat/messages
Body: {
  "conversationId": "...",
  "content": "ูุญุชูู ุงูุฑุณุงูุฉ",
  "messageType": "text",
  "replyTo": "message_id" (optional)
}
```

### ุญุฐู ุฑุณุงูุฉ:
```
DELETE /api/v1/chat/messages/{messageId}
```

### ุฅูุดุงุก ูุญุงุฏุซุฉ:
```
POST /api/v1/chat/conversations
Body: {
  "participantId": "user_id"
}
```

---

## ๐ ูููู ุงูุจูุงูุงุช

### ูุงุฆู ุงููุญุงุฏุซุฉ (Conversation):
```typescript
{
  _id: string;
  participants: Participant[];
  type: 'direct' | 'admin_support' | 'group';
  lastMessage?: Message;
  lastMessageAt: string;
  myUnreadCount?: number;
}
```

### ูุงุฆู ุงูุฑุณุงูุฉ (Message):
```typescript
{
  _id: string;
  conversation: string;
  sender: Participant;
  content: string;
  messageType: string;
  isPinned: boolean;
  isDeleted: boolean;
  isEdited: boolean;
  replyTo?: Message;
  readBy?: ReadReceipt[];
  attachments?: string[];
  createdAt: string;
}
```

### ูุงุฆู ุงููุดุงุฑู (Participant):
```typescript
{
  _id: string;
  name: string;
  profileImg?: string;
  role: string;
  chatStatus: string;
}
```

---

## ๐ ุฎุทูุงุช ุงูุงุณุชุฎุฏุงู

### 1. **ุชุดุบูู ุงูุฎุงุฏู**
```bash
cd udemy-build-ecommerce-api-using-nodejs-master
npm start
```

### 2. **ุชุดุบูู ุงูุชุทุจูู ุงูุฃูุงูู**
```bash
npm run dev
```

### 3. **ุงููุตูู ููุดุงุช**
- ุงุฐูุจ ุฅูู ููุญุฉ ุงูุชุญูู
- ุงุฎุชุฑ ุงููุณู "ุงูุฑุณุงุฆู"
- ุงุจุฏุฃ ูุญุงุฏุซุฉ ุฌุฏูุฏุฉ ุฃู ุงุฎุชุฑ ูุญุงุฏุซุฉ ููุฌูุฏุฉ

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ุชุธูุฑ ุงูุฑุณุงุฆู
**ุงูุญู:**
1. ุชุฃูุฏ ูู ูุฌูุฏ Token ุตุญูุญ ูู localStorage
2. ุชุญูู ูู ุงูุงุชุตุงู ุจุงูุฎุงุฏู
3. ุชุฃูุฏ ูู ุฃู ุงูู conversation_id ุตุญูุญ

### ุงููุดููุฉ: ูุดู ุฅุฑุณุงู ุงูุฑุณุงูุฉ
**ุงูุญู:**
1. ุชุญูู ูู ุฃู ุงููุญุชูู ููุณ ูุงุฑุบุงู
2. ุชุฃูุฏ ูู ุฃู conversation_id ููุฌูุฏ
3. ุชุญูู ูู Token ุงูุตูุงุญูุฉ

### ุงููุดููุฉ: ูุง ูุธูุฑ ุงูุจุญุซ
**ุงูุญู:**
1. ุชุฃูุฏ ูู ูุฌูุฏ Token ูู localStorage
2. ุชุญูู ูู ุฃู ุงูุฎุงุฏู ูุณุชุฌูุจ ูู endpoint ุงูุจุญุซ

---

## ๐ ุชุญุณููุงุช ูุณุชูุจููุฉ

### ูุฎุทุท ููุชุญุณููุงุช:
- [ ] ุฅุถุงูุฉ Socket.IO ููุชุญุฏูุซุงุช ุงูููุฑูุฉ
- [ ] ุฏุนู ูุฑููุงุช ุงููููุงุช
- [ ] ุฌูุณุงุช ุงูููุงููุงุช ุงูููุฏูู
- [ ] ุงููุญุงุฏุซุงุช ุงูุฌูุงุนูุฉ
- [ ] ุฑููุฒ ุชุนุจูุฑูุฉ ูุฎุตุตุฉ
- [ ] ุงูุจุญุซ ุงููุชูุฏู ุนู ุงูุฑุณุงุฆู
- [ ] ุชุซุจูุช ุงูุฑุณุงุฆู ุงููููุฉ
- [ ] ุฅุนุงุฏุฉ ุชูุฌูู ุงูุฑุณุงุฆู

---

## ๐ก ูุตุงุฆุญ ูููุฉ

### ูููุทูุฑูู:
1. **ุงุณุชุฎุฏู variant prop ููุชุญูู ุจุงูุญุฌู:**
   ```tsx
   <ChatDashboardWidget variant="full" /> // ุนุฑุถ ูุงูู
   <ChatDashboardWidget variant="compact" /> // ุนุฑุถ ูุถุบูุท
   ```

2. **ุงุณุชุฎุฏู onClose ููุฅุบูุงู:**
   ```tsx
   <ChatDashboardWidget onClose={() => setShowChat(false)} />
   ```

3. **ุชุฎุฒูู ุงูุจูุงูุงุช:**
   - Token ููุฎุฒู ูู localStorage
   - userId ููุฎุฒู ูู localStorage
   - ูุง ุชูุณู ูุณุญ ุงูุจูุงูุงุช ุนูุฏ ุงูุชุณุฌูู ุงูุฎุฑูุฌ

### ูููุณุชุฎุฏููู:
1. ุงุณุชุฎุฏู **Shift+Enter** ููุณุฑ ุงูุณุทุฑ
2. ุงุถุบุท **Enter** ูุฅุฑุณุงู ุงูุฑุณุงูุฉ
3. ูุฑูุฑ ุงููุคุดุฑ ุนูู ุงูุฑุณุงูุฉ ูุนุฑุถ ุงูุฎูุงุฑุงุช
4. ุงุณุชุฎุฏู ุงูุจุญุซ ููุนุซูุฑ ุนูู ุงููุญุงุฏุซุงุช ุงููุฏููุฉ

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

### ููุฅุจูุงุบ ุนู ุฎูู:
```
1. ูุตูู ุงููุดููุฉ ุจูุถูุญ
2. ุฃุฑุณู ููุทุฉ ุดุงุดุฉ ุฅู ุฃููู
3. ุฃุฐูุฑ ุงุณู ุงููุชุตูุญ ูุงูุฅุตุฏุงุฑ
4. ุฃุฐูุฑ ุฎุทูุงุช ุฅุนุงุฏุฉ ุงูุฅูุชุงุฌ
```

---

## ๐ ุณุฌู ุงูุชุบููุฑุงุช

### ุงูุฅุตุฏุงุฑ 1.0.0 (ุงูุญุงูู)
- โ ุฅูุดุงุก ChatDashboardWidget
- โ ุฏูุฌ ูู UserDashboard
- โ ุฏูุฌ ูู mangerDashboard
- โ ุฏูุฌ ูู AdminDashboard
- โ ุฏุนู ุงูุฅูููุฌู
- โ ุฏุนู ุงูุฑุฏ ุนูู ุงูุฑุณุงุฆู
- โ ุญุฐู ุงูุฑุณุงุฆู

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2025-12-24  
**ุงูุญุงูุฉ:** โ ูุชุงุญ ููุงุณุชุฎุฏุงู ุงูููุฑู  
**ุงููุตุฏุฑ:** ChatDashboardWidget Component
