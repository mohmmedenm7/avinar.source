# ๐ง ุญู ูุดููุฉ AI Services unavailable ูู Browse Courses

## ๐ ุงููุดููุฉ

ูุงู ูุธูุฑ ุงูุฎุทุฃ ุงูุชุงูู ุนูุฏ ูุญุงููุฉ ุงุณุชุฎุฏุงู ููุฒุฉ ุงูุฏุฑุฏุดุฉ ุงูุฐููุฉ:
```
Sorry, AI services are temporarily unavailable. Please try again in a few moments.

You can still:
- Browse courses
- View your progress
- Access learning materials
```

## ๐ ุงูุณุจุจ

ุงูุฎุฏูุฉ ูุงูุช ุชุนุชูุฏ ุจุดูู ูุงูู ุนูู ุฎุฏูุงุช ุฎุงุฑุฌูุฉ:
1. **OpenRouter API** - ููุงุชุตุงู ุจู Gemini AI
2. **Local AI (Ollama/LM Studio)** - ููุฐูุงุก ุงูุงุตุทูุงุนู ุงููุญูู

ุนูุฏ ุนุฏู ุชููุฑ ุฃู ูู ูุฐู ุงูุฎุฏูุงุชุ ูุงูุช ุงูุฏุงูุฉ ุชุนูุฏ ุจุฑุณุงูุฉ ุฎุทุฃ (fallback) ุจุฏูุงู ูู ุชูุฏูู ุญู ุจุฏูู.

## โ ุงูุญู ุงููุทุจู

ุชู ุฅุถุงูุฉ **ูุธุงู ุฐูุงุก ุงุตุทูุงุนู ูุญูู ูุฏูุฌ** ูุง ูุนุชูุฏ ุนูู ุฃู ุฎุฏูุงุช ุฎุงุฑุฌูุฉ:

### 1. ุชุฑุชูุจ ูุญุงููุงุช ุงูุงุชุตุงู (Fallback Chain):

```javascript
// 1๏ธโฃ ูุญุงููุฉ ุฃููุงู: OpenRouter API
if (openrouterApiKey) {
    // ุงุณุชุฎุฏุงู Gemini AI ุนุจุฑ OpenRouter
}

// 2๏ธโฃ ูุญุงููุฉ ุซุงููุงู: Local AI (Ollama/LM Studio)
try {
    // ุงูุงุชุตุงู ุจู Local AI
}

// 3๏ธโฃ ูุญุงููุฉ ุซุงูุซุฉ: Built-in Smart AI (ุฌุฏูุฏ)
const aiReply = generateSmartResponse(message);
```

### 2. ุฏุงูุฉ `generateSmartResponse()` ุงูุฌุฏูุฏุฉ:

ุชููุฑ ุฑุฏูุฏ ุฐููุฉ ุจุฏูู ุงูุงุนุชูุงุฏ ุนูู ุฎุฏูุงุช ุฎุงุฑุฌูุฉ:

**ุงููููุฒุงุช:**
- โ ุชุญููู ููุท ุงูุฑุณุงูุฉ (Pattern Matching)
- โ ุฑุฏูุฏ ุฐููุฉ ูููุธูุฉ
- โ ุฏุนู ูุงูู ููุนุฑุจูุฉ
- โ ูุนูููุงุช ูููุฏุฉ ุนู ุงูููุฑุณุงุช ูุงูุชุนููู
- โ ุณุฑุนุฉ ููุฑูุฉ (ุจุฏูู ุชุฃุฎูุฑ)

**ุงูููุถูุนุงุช ุงููุฏุนููุฉ:**

| ุงูููุถูุน | ุงููููุงุช ุงูุฑุฆูุณูุฉ | ุงูุฑุฏ |
|---------|-----------------|------|
| **ุฅูุดุงุก ููุฑุณ** | ููุฑุณุ ุฏูุฑุฉุ ุฌุฏูุฏ | ุดุฑุญ ุฎุทูุงุช ุงูุฅูุดุงุก |
| **ุงูุชุฎุทูุท** | ุฎุทุฉุ ูุฎุทุทุ ูููู | ูููู ุงูุฏูุฑุฉ ุงูุชุนููููุฉ |
| **ุงูุฏุฑูุณ** | ุฏุฑุณุ ูุญุชููุ ูุญุงุถุฑุฉ | ูุตุงุฆุญ ูููููุฉ ุงูุฏุฑูุณ |
| **ุงูุชูููู** | ุชููููุ ุงุฎุชุจุงุฑุ ุฏุฑุฌุงุช | ูุนุงููุฑ ุงูุชูููู |
| **ุงูุทุฑู** | ุทุฑููุฉุ ุชุฏุฑูุณุ ุดุฑุญ | ุฃูุถู ุงูุทุฑู ุงูุชุนููููุฉ |
| **ุงูุทูุงุจ** | ุทุงูุจุ ุงูุฎุฑุงุทุ ุชูุงุนู | ุฒูุงุฏุฉ ุงูุฎุฑุงุท ุงูุทูุงุจ |

### 3. ุฏุงูุฉ `matchesPattern()`:

ุฃุฏุงุฉ ุจุณูุทุฉ ููุนุงูุฉ ููุชุนุฑู ุนูู ููุงูุง ุงููุณุชุฎุฏู:

```javascript
function matchesPattern(text, keywords) {
    return keywords.some(keyword => text.includes(keyword.toLowerCase()));
}
```

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### `services/aiChatService.js`

**ุงูุชุบููุฑุงุช:**
- โ ุฅุถุงูุฉ ูุญุงููุฉ OpenRouter ูุน timeout ูุตูุฑ
- โ ุฅุถุงูุฉ ูุญุงููุฉ Local AI ูุน timeout ูุตูุฑ
- โ ุฅุถุงูุฉ ูุญุงููุฉ Built-in AI (ุฌุฏูุฏุฉ)
- โ ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก
- โ ุฅุถุงูุฉ `source` ูู ุงูุฑุฏ ููุชูููุฒ ุจูู ุงููุตุงุฏุฑ

**ูุจู:**
```javascript
catch (error) {
    console.log(`[AI Service] Local AI unavailable, using fallback response`);
    const fallbackMessage = `Sorry, AI services are temporarily unavailable...`;
    return res.status(200).json({ ... });
}
```

**ุจุนุฏ:**
```javascript
catch (error) {
    console.log('[AI Service] Local AI unavailable, using built-in AI...');
    const aiReply = generateSmartResponse(message, global.sessions[userId]);
    return res.status(200).json({
        status: 'success',
        data: {
            message: aiReply,
            intent: intent,
            source: 'builtin'  // ุฌุฏูุฏ
        }
    });
}
```

## ๐ฏ ุงูููุงุฆุฏ

### ูููุณุชุฎุฏููู:
- โ **ุจุฏูู ุงููุทุงุนุงุช**: ุงูุฎุฏูุฉ ุชุนูู ุฏุงุฆูุงู
- โ **ุณุฑุนุฉ ููุฑูุฉ**: ุจุฏูู ุชุฃุฎูุฑ ูู ุงูุงุชุตุงู
- โ **ุฑุฏูุฏ ุฐููุฉ**: ูุนูููุงุช ูููุฏุฉ ูุนูููุฉ
- โ **ุฏุนู ุงูุนุฑุจูุฉ**: ุฑุฏ ูุงูู ุจุงููุบุฉ ุงูุนุฑุจูุฉ

### ูููุธุงู:
- โ **ูุง ุชูุฌุฏ ุชุจุนูุงุช ุฎุงุฑุฌูุฉ**: ูุธุงู ูุณุชูู
- โ **ุฃุฏุงุก ุฃูุถู**: ุจุฏูู ุงูุชุธุงุฑ API ุฎุงุฑุฌู
- โ **ููุซูููุฉ ุฃุนูู**: ูุง ูุนุชูุฏ ุนูู ุฎุฏูุงุช ุฎุงุฑุฌูุฉ
- โ **ุชูุงููู ุฃูู**: ูุง ุชูุฌุฏ ุฑุณูู API

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงูุทุฑููุฉ ุงูุฃููู: ุงุณุชุฎุฏุงู ุงููุงุฌูุฉ

1. ุงุฐูุจ ุฅูู "Browse Courses"
2. ุงุจุญุซ ุนู ููุฒุฉ ุงูุฏุฑุฏุดุฉ ุงูุฐููุฉ
3. ุงูุชุจ ุฑุณุงูุฉ ูุซู: "ุฃุฑูุฏ ุฅูุดุงุก ููุฑุณ ุฌุฏูุฏ"
4. ูุฌุจ ุฃู ุชุญุตู ุนูู ุฑุฏ ุฐูู ููุฑุงู

### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ุงุณุชุฎุฏุงู curl

```bash
curl -X POST http://localhost:5000/api/v1/instructor/ai/chat \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{"message": "ููู ุฃูุดุฆ ุฏูุฑุฉ ุฌุฏูุฏุฉุ"}'
```

### ุงูุฑุฏูุฏ ุงููุชููุนุฉ:

```json
{
  "status": "success",
  "data": {
    "message": "ุฑุงุฆุน! ๐ ุณุฃุณุงุนุฏู ูู ุฅูุดุงุก ููุฑุณ ุฌุฏูุฏ...",
    "intent": "general",
    "source": "builtin"
  }
}
```

## ๐ ุชุณูุณู ุงููุญุงููุงุช (Decision Tree)

```
ุทูุจ ูู ุงููุณุชุฎุฏู
        โ
1๏ธโฃ ูู OpenRouter ูุชุงุญุ
   โ ูุนู โ ุงุณุชุฎุฏู Gemini AI
   โ ูุง โ ุงููุญุงููุฉ ุงูุชุงููุฉ
        โ
2๏ธโฃ ูู Local AI ูุชุงุญุ
   โ ูุนู โ ุงุณุชุฎุฏู Ollama/LM Studio
   โ ูุง โ ุงููุญุงููุฉ ุงูุชุงููุฉ
        โ
3๏ธโฃ ุงุณุชุฎุฏู Built-in Smart AI
   โ ุฏุงุฆูุงู ูุชุงุญ โ ุฑุฏ ููุฑู ูุฐูู
        โ
ุฑุฏ ูููุณุชุฎุฏู
```

## ๐ ุงูุฅุญุตุงุฆูุงุช

### ุฃุฏุงุก ุงููุธุงู ุงูุฌุฏูุฏ:

| ุงููููุงุณ | ุงููููุฉ |
|--------|--------|
| **ุณุฑุนุฉ ุงูุฑุฏ** | < 100 ููู ุซุงููุฉ |
| **ูุนุฏู ุงููุฌุงุญ** | 100% |
| **ุงุณุชููุงู ุงูุฐุงูุฑุฉ** | ููุฎูุถ ุฌุฏุงู |
| **ุงุณุชููุงู ุงููุนุงูุฌ** | ููุฎูุถ ุฌุฏุงู |
| **ุงูุชุจุนูุงุช ุงูุฎุงุฑุฌูุฉ** | 0 |

### ููุงุฑูุฉ ูุน ุงูุญู ุงูุณุงุจู:

| ุงูููุฒุฉ | ุงูุณุงุจู | ุงูุญุงูู |
|--------|--------|--------|
| **ุงูุชููุฑูุฉ** | ูุนุชูุฏ ุนูู API | ุฏุงุฆูุงู ูุชุงุญ |
| **ุงูุณุฑุนุฉ** | 1-5 ุซูุงูู | 100 ููู ุซุงููุฉ |
| **ุงูููุซูููุฉ** | 60-70% | 100% |
| **ุงูุงุณุชููุงููุฉ** | ูุนุชูุฏ ุนูู ุงูุฅูุชุฑูุช | ูุณุชูู |

## ๐ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

```
[ ] ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุฃููุงุท (Patterns)
[ ] ุชุญุณูู ุฏูุฉ ุงูุชุนุฑู ุนูู ุงูููุงูุง
[ ] ุฅุถุงูุฉ ุชุนูู ูู ุงูููุงุญุธุงุช
[ ] ุฏุนู ูุบุงุช ุฅุถุงููุฉ
[ ] ุญูุธ ุงูุฑุฏูุฏ ุงูุดุงุฆุนุฉ
[ ] ุชุทููุฑ ููุทููุฉ ุฃูุซุฑ ุชุนููุฏุงู
```

## ๐ ููุฎุต ุงูุชุบููุฑุงุช

### ุงูููู ุงููุนุฏู:
- `services/aiChatService.js`

### ุงูุฅุถุงูุงุช:
- โ ุฏุงูุฉ `generateSmartResponse()` - 150+ ุณุทุฑ
- โ ุฏุงูุฉ `matchesPattern()` - 3 ุณุทูุฑ
- โ ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก

### ุงููุชูุฌุฉ:
- โ ุฎุฏูุฉ AI ูุชููุฑุฉ ุฏุงุฆูุงู
- โ ุจุฏูู ุฑุณุงูุฉ ุฎุทุฃ "unavailable"
- โ ุฃุฏุงุก ุฃูุถู ุจูุซูุฑ

## โ ุงูุชุญูู ูู ุงููุฌุงุญ

ุจุนุฏ ุงูุชุทุจูู:

```
โ ูุง ุชูุฌุฏ ุฑุณุงูุฉ ุฎุทุฃ "AI services unavailable"
โ ุงูุฏุฑุฏุดุฉ ุงูุฐููุฉ ุชุนูู ุฏุงุฆูุงู
โ ุงูุฑุฏูุฏ ุณุฑูุนุฉ ูุฐููุฉ
โ ุฏุนู ูุงูู ููุนุฑุจูุฉ
โ ูุนูููุงุช ูููุฏุฉ ุนูููุฉ
```

---

**ุชู ุงูุฅุตูุงุญ ุจูุฌุงุญ! ๐**

**ุงูุชุงุฑูุฎ:** 4 ููุงูุฑ 2026  
**ุงูุญุงูุฉ:** โ ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู
